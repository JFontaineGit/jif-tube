<div class="app-container">
  <!-- Reproductor invisible para YouTube (SIEMPRE renderizado) -->
  <div id="yt-player" class="invisible-player" aria-hidden="true"></div>

  <!-- Navbar -->
  <app-navbar
    (search)="onSearch($event)"
    (toggleSidebar)="onToggleSidebar()"
    [isScrolled]="isScrolled()"
    class="app-navbar">
  </app-navbar>

  <!-- Sidebar -->
  <app-sidebar
    [isOpen]="isSidebarOpen()"
    [isCollapsed]="isSidebarCollapsed()"
    (toggleSidebar)="onToggleSidebar()"
    (close)="onCloseSidebar()"
    class="app-sidebar">
  </app-sidebar>

  <!-- Overlay para móvil cuando sidebar está abierta -->
  @if (isSidebarOpen() && isMobile()) {
    <div
      class="sidebar-overlay"
      (click)="onCloseSidebar()"
      aria-hidden="true">
    </div>
  }

  <!-- Contenido principal -->
  <main
    class="main-content"
    [class.sidebar-collapsed]="isSidebarCollapsed() && !isMobile()"
    [class.sidebar-expanded]="!isSidebarCollapsed() && !isMobile()">
    <div class="content-wrapper">
      <router-outlet></router-outlet>
    </div>
  </main>

  <!-- Player UI (visible solo si hay canción) -->
  @if (isPlayerVisible()) {
    <app-player class="app-player"></app-player>
  }
</div>
