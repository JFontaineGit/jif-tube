<div class="app-container">
  <!-- Reproductor invisible para YouTube (SIEMPRE renderizado) -->
  <div id="yt-player" class="invisible-player" aria-hidden="true"></div>

  <!-- Sidebar (full height desde top:0) -->
  <app-sidebar
    [isOpen]="isSidebarOpen()"
    [isCollapsed]="isSidebarCollapsed()"
    (toggleSidebar)="onToggleSidebar()"
    (close)="onCloseSidebar()"
    class="app-sidebar">
  </app-sidebar>

  <!-- Navbar (al lado del sidebar) -->
  <app-navbar
    [sidebarCollapsed]="isSidebarCollapsed()"
    [isScrolled]="isScrolled()"
    (search)="onSearch($event)"
    (toggleSidebar)="onToggleSidebar()"
    class="app-navbar">
  </app-navbar>

  <!-- Overlay para móvil cuando sidebar está abierta -->
  @if (isSidebarOpen() && isMobile()) {
    <div
      class="sidebar-overlay"
      (click)="onCloseSidebar()"
      aria-hidden="true">
    </div>
  }

  <!-- Contenido principal -->
  <main
    class="main-content"
    [class.sidebar-collapsed]="isSidebarCollapsed() && !isMobile()"
    [class.sidebar-expanded]="!isSidebarCollapsed() && !isMobile()">
    <div class="content-wrapper">
      <router-outlet></router-outlet>
    </div>
  </main>

  <!-- Player UI (siempre visible, se minimiza cuando no hay canción) -->
  <app-player 
    [sidebarCollapsed]="isSidebarCollapsed()"
    class="app-player">
  </app-player>
</div>