@use './styles/_mixins.scss' as mix;
@use './styles/_media-queries.scss' as media;

@use './styles/_transitions.scss' as *;
@use './styles/_colors.scss' as *;
@use './styles/_layout.scss' as *;
@use './styles/_overrides.scss' as *;

*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  font-size: 16px;
  line-height: 1.5;
  -webkit-text-size-adjust: 100%;
  scroll-behavior: smooth;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  background: var(--app-dynamic-gradient, var(--app-base-gradient));
  color: #fff;
  overflow-x: hidden;
  min-height: 100vh;
  position: relative;
}

/* ========================================
   VARIABLES CSS DINÁMICAS (INTEGRADAS CON PLUGIN)
   ======================================== */
:root {
  /* Colores dinámicos del plugin (inyectados por JS) */
  --ytmusic-album-color: rgb(0, 0, 0);
  --ytmusic-album-color-dark: rgb(0, 0, 0);
  --ytmusic-album-color-ratio: 50%;

  /* Gradiente base y superficies predeterminadas */
  --app-base-gradient: linear-gradient(135deg, #0b1120 0%, #111827 45%, #030712 100%);
  --app-dynamic-gradient: var(--app-base-gradient);
  --app-surface-solid: rgba(15, 23, 42, 0.94);
  --app-surface-muted: rgba(13, 20, 32, 0.88);
  --app-surface-soft: rgba(8, 13, 23, 0.92);
  --app-card-surface: rgba(17, 25, 40, 0.78);
  --app-overlay: rgba(10, 15, 25, 0.7);
  --app-glass: rgba(17, 25, 40, 0.55);
  --app-navbar-solid: rgba(15, 23, 42, 0.95);
  --app-navbar-blur: rgba(15, 23, 42, 0.6);
  --app-player-glow: rgba(15, 23, 42, 0.55);

  /* Colores base fallback (mezclados dinámicamente via JS) */
  --bg-primary: var(--ytmusic-color-black1, #212121);
  --bg-secondary: var(--yt-spec-general-background-a, #181818);
  --bg-tertiary: var(--yt-spec-general-background-b, #0f0f0f);
  --bg-card: var(--yt-spec-raised-background, #212121);
  
  --text-primary: #fff;
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  
  --border-color: rgba(255, 255, 255, 0.1);
  --border-color-light: rgba(255, 255, 255, 0.2);
  
  /* Sombras fallback (integrables con color-mix del plugin) */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.1);
  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
  --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.1);
  --shadow-glass: 0 8px 32px rgba(0, 0, 0, 0.1);
  
  /* Transiciones (de _transitions.scss) */
  --transition-fast: 150ms;
  --transition-normal: 300ms;
  --transition-slow: 500ms;
}

/* ========================================
   ELEMENTOS BASE
   ======================================== */
h1, h2, h3, h4, h5, h6 {
  font-weight: 600;
  line-height: 1.2;
  color: var(--text-primary);
}

h1 { font-size: 2.5rem; }
h2 { font-size: 2rem; }
h3 { font-size: 1.75rem; }
h4 { font-size: 1.5rem; }
h5 { font-size: 1.25rem; }
h6 { font-size: 1rem; }

p {
  margin-bottom: 1.5rem;
  color: var(--text-secondary);
  line-height: 1.6;
}

a {
  color: rgba(255, 255, 255, 0.85);
  text-decoration: none;
  transition: color var(--transition-fast);

  &:hover {
    color: #fff;
  }

  &:focus-visible {
    outline: 2px solid rgba(255, 255, 255, 0.35);
    outline-offset: 2px;
    border-radius: 4px;
  }
}

button {
  font-family: inherit;
  cursor: pointer;
  
  &:disabled {
    cursor: not-allowed;
  }
}

input, textarea, select {
  font-family: inherit;
  font-size: inherit;
}

/* ========================================
   SCROLLBARS GLOBALES
   ======================================== */
* {
  @include mix.custom-scrollbar;
}

/* ========================================
   UTILIDADES
   ======================================== */
.sr-only {
  @include mix.sr-only;
}

.text-gradient {
  @include mix.gradient-text(#38bdf8, #818cf8);
}

.fade-in {
  @include mix.fade-in;
}

.slide-up {
  @include mix.slide-up;
}

/* ========================================
   ESTADOS GLOBALES
   ======================================== */
[aria-expanded="true"] .expand-icon {
  transform: rotate(180deg);
}

[data-theme="loading"] {
  @include mix.skeleton;
}

/* ========================================
   ANIMACIONES GLOBALES
   ======================================== */
@keyframes breathe {
  0%, 100% { opacity: 0.4; }
  50% { opacity: 1; }
}

.breathing {
  animation: breathe 2s ease-in-out infinite;
}

/* ========================================
   RESPONSIVE TYPOGRAPHY
   ======================================== */
@include media.mobile-only {
  html { font-size: 14px; }
  
  h1 { font-size: 2rem; }
  h2 { font-size: 1.75rem; }
  h3 { font-size: 1.5rem; }
  h4 { font-size: 1.25rem; }
}

/* ========================================
   ACCESIBILIDAD
   ======================================== */
@include media.reduce-motion {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
  
  html {
    scroll-behavior: auto !important;
  }
}

@include media.high-contrast {
  :root {
    --border-color: #9ca3af;
    --bg-card: #1f2937;
  }
  
  button, a {
    outline: 2px solid currentColor;
  }
}

/* ========================================
   PRINT STYLES
   ======================================== */
@media print {
  * {
    background: transparent !important;
    color: black !important;
    box-shadow: none !important;
  }
  
  .navbar,
  .sidebar,
  .player-container {
    display: none !important;
  }
}